generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Bookmark {
  id          String   @id
  url         String   @unique
  title       String
  description String   @default("")
  tags        String[] @default([])
  isRead      Boolean  @default(false)
  isPublic    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([createdAt])
  @@index([url])
}

model Layout {
  id          String   @id @default("global")
  tabs        Json     @default("[]")
  widgets     Json     @default("[]")
  positions   Json     @default("{}")
  customLinks Json     @default("[]")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Favicon {
  id        String   @id @default(uuid())
  domain    String   @unique
  dataUri   String
  createdAt DateTime @default(now())
  expiresAt DateTime

  @@index([domain])
  @@index([expiresAt])
}

// Future: Category and Tag models for relational approach
// Uncomment and implement when ready to migrate from string[] tags
//
// model Category {
//   id        String     @id @default(cuid())
//   name      String     @unique
//   bookmarks Bookmark[] @relation("BookmarkCategories")
//   createdAt DateTime   @default(now())
//
//   @@index([name])
// }
//
// model Tag {
//   id        String     @id @default(cuid())
//   name      String     @unique
//   bookmarks Bookmark[] @relation("BookmarkTags")
//   createdAt DateTime   @default(now())
//
//   @@index([name])
// }
